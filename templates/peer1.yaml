# Shared configuration file used as a base for ALL instances
# Peer specific values are replaced by the peer setup script
#
# -------------------------------------------------------------------
# Optional self section
# -------------------------------------------------------------------
# You can either:
#   • set self.peer_id here, OR
#   • pass --peer-id on the command line, OR
#   • set PEER_ID as an environment variable (only really useful if that is the only instance running in that shell)
#
# CLI / env vars take precedence over this value.
#
self:
  peer_id: peer1

# -------------------------------------------------------------------
# Local LLM configuration (llama-cpp-python)
# -------------------------------------------------------------------
# Required if you want to send anonymised summaries, and not the original document.
#
model:
  path: ~/models/Llama-3.2-3B-Instruct-uncensored-Q5_K_S.gguf
  n_ctx: 4096
  n_threads: 8
  n_gpu_layers: 0
  max_tokens: 256

# -------------------------------------------------------------------
# HMAC signing (recommended for non-local networks and prod)
# -------------------------------------------------------------------
# If enabled, hospital_federator_demo.py will add:
#   X-Signature
#   X-Signature-Alg
# headers to /events/push requests.
#
# The secret key SHOULD NOT be committed to this file.
# Instead, export it as an environment variable.
#
#   export HOSPITAL_FEDERATOR_HMAC_KEY="super-secret-key"
#
signing:
  enabled: true
  key_env: HOSPITAL_FEDERATOR_HMAC_KEY
  alg: sha256

# -------------------------------------------------------------------
# TLS defaults (applied to peers unless overridden per-peer)
# -------------------------------------------------------------------
tls_defaults:
  verify: true          # true, false, or path to CA bundle
  timeout_s: 5.0
  # client_cert: /etc/ssl/client.crt
  # client_key: /etc/ssl/client.key

# -------------------------------------------------------------------
# Peer definitions
# -------------------------------------------------------------------
# These must match the FastAPI services exposing:
#   POST /events/push
#
# All peers listed here will appear in:
#   • destination checkboxes
#   • per-peer status tables
#   • outbox resend UI
#
peers:
  - id: peer-a
    name: Hospital A
    url: https://127.0.0.1:8000
    # tls:
    #   verify: /etc/ssl/ca.pem

  - id: peer-b
    name: Hospital B
    url: https://127.0.0.1:8001

  - id: peer-c
    name: Hospital C
    url: https://127.0.0.1:8002

  - id: peer-d
    name: Hospital D
    url: https://127.0.0.1:8003

